const input=document.querySelector("#searchBar"),tbody=document.querySelector("tbody"),table=document.querySelector("table"),url="https://api.tvmaze.com/search/shows?q=",loader=document.querySelector("#loader");let timeout=null;const search=()=>{clearTimeout(timeout),timeout=setTimeout((function(){toggleLoader(),setTimeout((()=>{fetch(url+input.value).then((e=>e.json())).then((e=>{renderData(e),toggleLoader()})).catch((e=>alert(`ERROR! ${e}`)))}),1e3)}),1e3)},renderData=function(e){if(tbody.innerHTML="",e.length)for(list of e){const e=document.createElement("tr"),t=document.createElement("td"),n=document.createElement("td"),o=document.createElement("td"),r=document.createElement("td"),a=document.createElement("td"),d=document.createElement("img");tbody.append(e),e.append(t),e.append(n),e.append(o),e.append(r),e.append(a),n.append(d),t.innerText=list.show.name,d.setAttribute("src",list.show.image?.medium),o.innerText=Math.round(100*list.score)/10+" / 10",r.innerText=list.show.genres,a.innerHTML=list.show.summary}else alert("No movies found."),input.value=""},toggleLoader=function(){loader.classList.toggle("hidden"),table.classList.toggle("hidden")};input.addEventListener("input",search);